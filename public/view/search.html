<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Park Lite Search</title>
    <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
      integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz"
      crossorigin="anonymous"
    ></script>

    <!-- Unit conversion library -->
    <script type="module">
      import convert from 'https://cdn.jsdelivr.net/npm/convert@4';
      window.convert = convert;
    </script>

    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css" integrity="sha256-sA+zWATbFveLLNqWO2gtiw3HL/lh1giY/Inf1BJ0z14=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js" integrity="sha256-o9N1jGDZrf5tS+Ft4gbIK7mYMipq9lqpVJ91xHSyKhg=" crossorigin=""></script>

    <!-- AngularJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.2/angular.js"></script>

    <script src="https://use.fontawesome.com/da8f2a3609.js"></script>
    <script src="../script/search.js"></script>

    <link rel="stylesheet" href="../css/search.css" />
  </head>

  <style>
    .background {
      background-color: black;
    }

    .card {
      border: none;
    }

    .forgot-password:hover {
      color: white !important;
    }

    .gradient-custom {
      /* fallback for old browsers */
      background: #6a11cb;

      /* Chrome 10-25, Safari 5.1-6 */
      background: -webkit-linear-gradient(to right, rgba(106, 17, 203, 1), rgba(37, 117, 252, 1));

      /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
      background: linear-gradient(to right, rgba(106, 17, 203, 1), rgba(37, 117, 252, 1));
    }

    @media only screen and (max-width: 1080px) {
      #fadeshow1 {
        display: none;
      }
    }

    @media only screen and (min-width: 1081px) {
      #fadeshow2 {
        display: none;
      }
    }

    @media (min-width: 768px) {
      .gradient-form {
        height: 100vh !important;
      }
    }
    @media (min-width: 769px) {
      .gradient-custom-2 {
        border-top-right-radius: 0.3rem;
        border-bottom-right-radius: 0.3rem;
      }
    }
  </style>

  <body class="background gradient-custom" ng-app="pageApp" ng-controller="pageCtrl as vm">
    <div id="app">
      <!-- Modal -->
      <div class="modal fade" id="reservation-modal" data-bs-backdrop="static" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Confirm Reservation</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <h2>Garage: {{vm.form.location}}</h2>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
              <button type="button" class="btn btn-primary">Save changes</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Div to hold map and form -->
      <div class="mapAndSearch">
        <!-- Map -->
        <section id="map-section">
          <div id="map"></div>
        </section>

        <!-- Search Form -->
        <form id="search-form" class="row g-3">
          <!-- Location and Geolocate -->
          <fieldset>
            <legend>Location:</legend>
            <div class="input-group">
              <input type="text" class="form-control" id="locationInput" placeholder="Atlanta, GA" ng-model="vm.searchForm.location" ng-if="!vm.searchForm.useGeo" />

              <span class="input-group-text"
                ><input class="form-check-input" type="checkbox" ng-model="vm.searchForm.useGeo" id="checkUseLocation" /><label class="form-check-label" for="checkUseLocation"
                  >My Location</label
                ></span
              >
            </div>

            <!-- Search radius -->
            <div class="input-group">
              <span class="input-group-text">Within:</span>
              <input type="text" class="form-control" placeholer="0" ng-model="vm.searchForm.radius" /><br />
              <select class="form-select" ng-model="vm.searchForm.radiusUnit">
                <option selected value="miles">Miles</option>
                <option value="feet">Feet</option>
              </select>
            </div>
            <!-- Reservation Type -->
            <div class="input-group">
              <span class="input-group-text">Reservation Type</span>
              <select class="form-select" ng-model="vm.searchForm.type" ng-change="vm.checkType()">
                <option value="single">Single</option>
                <option value="monthly">Monthly</option>
              </select>
            </div>
          </fieldset>

          <!-- From datetime -->
          <fieldset class="datetime-fieldset">
            <legend>From:</legend>
            <div class="input-group datetime-date">
              <span class="input-group-text">Date</span>
              <input type="date" class="form-control" ng-model="vm.form.from.date" />
            </div>
            <div class="input-group datetime-time" id="from-time">
              <span class="input-group-text">Time</span>
              <select class="form-select datetime-hour" ng-model="vm.searchForm.from.hour">
                <option value="00">00</option>
                <option value="01">01</option>
                <option value="02">02</option>
                <option value="03">03</option>
                <option value="04">04</option>
                <option value="05">05</option>
                <option value="06">06</option>
                <option value="07">07</option>
                <option value="08">08</option>
                <option value="09">09</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
              </select>
              <span class="input-group-text">:</span>
              <select class="form-select datetime-minute" ng-model="vm.searchForm.from.minute">
                <option value="00">00</option>
                <option value="15">15</option>
                <option value="30">30</option>
                <option value="45">45</option>
              </select>
            </div>
          </fieldset>

          <!-- To datetime -->
          <fieldset class="datetime-fieldset" ng-if="!vm.searchForm.isMonthly">
            <legend>To:</legend>
            <div class="input-group datetime-date">
              <span class="input-group-text">Date</span>
              <input type="date" class="form-control" ng-model="vm.searchForm.to.date" />
            </div>
            <div class="input-group datetime-time" id="to-time">
              <span class="input-group-text">Time</span>
              <select class="form-select datetime-hour" ng-model="vm.searchForm.to.hour">
                <option value="00">00</option>
                <option value="01">01</option>
                <option value="02">02</option>
                <option value="03">03</option>
                <option value="04">04</option>
                <option value="05">05</option>
                <option value="06">06</option>
                <option value="07">07</option>
                <option value="08">08</option>
                <option value="09">09</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
                <option value="18">18</option>
                <option value="19">19</option>
                <option value="20">20</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
              </select>
              <span class="input-group-text">:</span>
              <select class="form-select w-auto datetime-minute" ng-model="vm.searchForm.to.minute">
                <option value="00">00</option>
                <option value="15">15</option>
                <option value="30">30</option>
                <option value="45">45</option>
              </select>
            </div>
          </fieldset>

          <!-- Search button -->
          <button class="btn btn-primary" type="submit" value="Submit" id="submitSearch" ng-click="vm.handleSearch($event)">Search</button>
        </form>
      </div>

      <!-- Search Results -->
      <section id="results-area">
        <div class="result-tile">
          <div class="result-descrip">
            <h3>Parkalot - 100 ft</h3>

            <h5>123 Broad St E, Atlanta, GA, 33456</h5>
          </div>

          <button type="button" class="reserve-btn" data-garage-id="3" data-bs-toggle="modal" data-bs-target="#reservation-modal" ng-click="vm.handleReserveBtn($event)">
            <h2>$35.75</h2>
            <h3>Reserve</h3>
          </button>
        </div>

        <div ng-repeat="garage in vm.garages">
          <div class="result-tile">
            <div class="result-descrip">
              <h3>{{garage.description}} - {{garage.distance}} {{vm.user.radiusUnit}}</h3>
              <h5>{{garage.address}}</h5>
            </div>
            <button class="reserve-btn">
              <h2>${{(garage.price * 3).toFixed(2)}}</h2>
              <h3>Reserve</h3>
            </button>
          </div>
        </div>
      </section>
    </div>
  </body>
</html>
